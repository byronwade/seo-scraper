{
  "url": "https://moz.com/blog/gettings-rankings-into-ga-using-custom-variables",
  "slug": "gettings-rankings-into-ga-using-custom-variables",
  "title": "Getting Rankings into GA Using Custom Variables - MozMoz logoMenu openMenu closeSearchMoz logo",
  "description": "Gathering rankings is one of the most annoying and time consuming tasks of an SEO consultant's work. Because of search personalization, it can be near impossible to find accurate rankings for keywords to report to clients or to use to gauge our work's effectiveness. Mike King and I have found a way…",
  "content": "Getting Rankings into GA Using Custom Variables SEO Analytics By: John Doherty October 23, 2011 The author's views are entirely their own (excluding the unlikely event of hypnosis) and may not always reflect the views of Moz. Table of Contents Copied! By: John Doherty October 23, 2011 Getting Rankings into GA Using Custom Variables SEO Analytics The author's views are entirely their own (excluding the unlikely event of hypnosis) and may not always reflect the views of Moz. Gathering rankings is one of the most annoying and time consuming tasks of an SEO consultant's work. Because of search personalization, it can be near impossible to find accurate rankings for keywords to report to clients or to use to gauge our work's effectiveness. Michael King and I have found a way to get rankings for the keywords driving traffic to your site directly into your Analytics using Custom Variables. Not only that, but we can also get international rankings based off of the keywords and the location from where the person came. And finally, this may also be a step towards identifying the identity of the (not provided) keywords we are now seeing thanks to \"privacy concerns\". How Do I Get These Rankings Into My GA? Different people have come up with different ways to get rankings directly into GA. One tactic is to create a custom profile using directions from this post by Chris Abernethy. This strategy works fairly well, but requires a lot of setup and requires you to be able to create another profile on your account. It also requires many steps and custom filters to clean the data. Mike and I decided that a custom variable would be a better way to go. In order to make this strategy work, you need to be able to do the following (or know someone who can): 1) Insert the Javascript custom variable that I will provide you below into your section of your website below your normal GA code; 2) Insert a parameter into your <body> tag; 3) Be able to slice/dice your data in Analytics; and 4) Use some Excel wizardry to present the data. The Code Here's the code that you need to use to send the data from your site into GA. Put this code in the section of your site, directly under your normal GA code: Get the code here Now you need to put this code into the <body> tag of your site. Yes, directly within the body tag. This code: onLoad=\"rankingsPush(); Your <body> tag will end up looking something like this: <body onLoad=\"rankingsPush();\"> Now sit back and let the data collect! Where Do I Find This Data? You find the data that is collecting under your Custom Variables tab in GA. I'll show you some screenshots. Click on Visitors > Demographics > Custom Variables, like so: Then you'll see this screen: Click through that and make your Secondary Dimension \"Keywords\". Boom! You get rankings and keywords! What Can We Do With This Data? Now we've got the rankings of the keywords driving traffic (which is what we really care about, right?). Data is worthless without applications, so let's come up with a few. Endless possibilities exist for slicing and dicing the data. International Rankings One cool thing that I did was match up the keywords and their positions with the country from which the visit came. You get the average ranking of the keyword driving traffic (which you also get in Webmaster Tools), but now you can break this down by country! Like so: We could guess at what the (not provided) keywords are We may also be able to guess at what the keywords coming up as (not provided) are now. As you can see in the screenshot below, I know that my visits from (not provided) are ranking #1 and #2. Based off of this, I can narrow it down to only my keywords ranking #1 and #2. If I do this for the data set I am working off of, I get these keywords: Now that I've narrowed this down, I can take the landing pages for these rankings (set secondary dimension to \"Landing Page\"): And I can see the landing page for my (not provided) keywords (Traffic > Sources > Search > Organic): So, we can guess that most of the (not provided) keywords probably have something to with my name, since the majority went to my homepage where my name ranks #1 or #2. *note* I am sure that someone with some mad Excel skills could automate this. If someone wants to take a crack at it, feel free and I'll link to it. *edit* I need to give a shout out to Mike Pantoliano's post from last September where he details a very similar process. He also has some great applications in that post.What other applications can you think of? How could we make this data sing even more? I welcome your comments below! Copied! Back to Top",
  "headers": [
    {
      "level": "H4",
      "text": "Discover top competitors’ winning content"
    },
    {
      "level": "H4",
      "text": "What is your Brand Authority?"
    },
    {
      "level": "H4",
      "text": "Unlock flexible pricing & new endpoints"
    },
    {
      "level": "H4",
      "text": "Surface actionable competitive intel"
    },
    {
      "level": "H1",
      "text": "Getting Rankings into GA Using Custom Variables"
    },
    {
      "level": "H3",
      "text": "Table of Contents"
    },
    {
      "level": "H1",
      "text": "Getting Rankings into GA Using Custom Variables"
    },
    {
      "level": "H2",
      "text": "How Do I Get These Rankings Into My GA?"
    },
    {
      "level": "H3",
      "text": "The Code"
    },
    {
      "level": "H2",
      "text": "Where Do I Find This Data?"
    },
    {
      "level": "H2",
      "text": "What Can We Do With This Data?"
    },
    {
      "level": "H3",
      "text": "International Rankings"
    },
    {
      "level": "H3",
      "text": "We could guess at what the (not provided) keywords are"
    },
    {
      "level": "H2",
      "text": "With Moz Pro, you have the tools you need to get SEO right — all in one place."
    },
    {
      "level": "H2",
      "text": "Read Next"
    },
    {
      "level": "H3",
      "text": "Directional Reporting in GA4 — Whiteboard Friday"
    },
    {
      "level": "H3",
      "text": "UTM Tagging for Google Business Profile — Whiteboard Friday"
    },
    {
      "level": "H3",
      "text": "4 Surprising SEO Test Results — Whiteboard Friday"
    },
    {
      "level": "H2",
      "text": "Comments"
    }
  ],
  "author": "John Doherty\n          \n            John Doherty\n          \n            John Doherty"
}